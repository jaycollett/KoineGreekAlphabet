{% extends "base.html" %}

{% block title %}Quiz - Greek Alphabet Mastery{% endblock %}

{% block content %}
<div class="bg-slate-800 rounded-lg shadow-2xl p-4 md:p-8 border border-slate-700 overflow-hidden">
    <!-- Loading State -->
    <div id="loading" class="text-center py-8">
        <div class="animate-pulse">
            <div class="h-4 bg-slate-700 rounded w-3/4 mx-auto mb-4"></div>
            <div class="h-4 bg-slate-700 rounded w-1/2 mx-auto"></div>
        </div>
    </div>

    <!-- Quiz Content -->
    <div id="quiz-content" class="hidden">
        <!-- Exit Button -->
        <div class="mb-3 flex justify-between items-center">
            <a href="/"
               onclick="return confirm('Exit quiz? Your progress will be saved and you can resume later.');"
               class="text-gray-400 hover:text-gray-200 text-sm flex items-center gap-1 transition duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Home
            </a>
        </div>

        <!-- Progress Bar - Subtle -->
        <div class="mb-4 opacity-60">
            <div class="flex justify-between text-xs text-gray-500 mb-1">
                <span>Question <span id="current-question">1</span> of <span id="total-questions">14</span></span>
                <span><span id="correct-count">0</span> correct</span>
            </div>
            <div class="w-full bg-slate-700 rounded-full h-1" role="progressbar" id="quiz-progress" aria-valuemin="0" aria-valuemax="14" aria-valuenow="0" aria-label="Quiz progress">
                <div id="progress-bar" class="bg-blue-500 h-1 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
        </div>

        <!-- Question Area - PROMINENT -->
        <div class="text-center mb-3" style="min-height: 180px; display: flex; flex-direction: column; justify-content: center;">
            <!-- Question Prompt -->
            <p class="text-xl md:text-2xl text-gray-200 mb-2 font-medium" id="question-prompt"></p>

            <!-- Greek Letter Display (for LETTER_TO_NAME questions) -->
            <div id="letter-display" class="hidden mb-4">
                <div class="greek-letter-display text-white" id="display-letter"></div>
            </div>

            <!-- Audio Display (for AUDIO_TO_UPPER/LOWER questions) -->
            <div id="audio-display" class="hidden mb-4" role="region" aria-label="Audio pronunciation question">
                <div class="flex flex-col items-center justify-center gap-3">
                    <div class="text-gray-400" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                        </svg>
                    </div>
                    <button
                        onclick="playAudioAgain()"
                        class="text-blue-400 hover:text-blue-300 text-sm font-medium flex items-center gap-2 transition duration-200 px-4 py-2 rounded-lg hover:bg-slate-700"
                        aria-label="Replay letter pronunciation"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                        Play Again
                    </button>
                </div>
            </div>
        </div>

        <!-- Answer Options -->
        <div class="space-y-3" id="options-container" role="group" aria-label="Answer options">
            <!-- Options will be inserted here -->
        </div>

        <!-- Next Question Button -->
        <div id="next-button-container" class="hidden mt-4 text-center">
            <button
                id="next-button"
                onclick="nextQuestion()"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-200 shadow-lg"
            >
                Next Question
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/quiz.js"></script>
{% endblock %}
